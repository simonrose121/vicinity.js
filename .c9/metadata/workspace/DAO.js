{"filter":false,"title":"DAO.js","tooltip":"/DAO.js","undoManager":{"mark":100,"position":100,"stack":[[{"group":"doc","deltas":[{"start":{"row":316,"column":6},"end":{"row":316,"column":7},"action":"remove","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":316,"column":6},"end":{"row":316,"column":7},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":316,"column":7},"end":{"row":316,"column":8},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":316,"column":8},"end":{"row":316,"column":9},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":316,"column":8},"end":{"row":316,"column":9},"action":"remove","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":316,"column":7},"end":{"row":316,"column":8},"action":"remove","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":316,"column":4},"end":{"row":316,"column":7},"action":"remove","lines":["thi"]},{"start":{"row":316,"column":4},"end":{"row":323,"column":7},"action":"insert","lines":["this.waySchema.findOne({_id: id}, function(err, w) {","        if (err) {","            return console.log(err);","        } else {","            w.tags_.push(tag);","            callback('added tag', w, tag);","        }","    });"]}]}],[{"group":"doc","deltas":[{"start":{"row":316,"column":52},"end":{"row":316,"column":53},"action":"remove","lines":["w"]}]}],[{"group":"doc","deltas":[{"start":{"row":316,"column":52},"end":{"row":316,"column":53},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":320,"column":12},"end":{"row":320,"column":13},"action":"remove","lines":["w"]}]}],[{"group":"doc","deltas":[{"start":{"row":320,"column":12},"end":{"row":320,"column":13},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":294,"column":9},"end":{"row":294,"column":18},"action":"remove","lines":["waySchema"]},{"start":{"row":294,"column":9},"end":{"row":294,"column":23},"action":"insert","lines":["relationSchema"]}]}],[{"group":"doc","deltas":[{"start":{"row":305,"column":9},"end":{"row":305,"column":18},"action":"remove","lines":["waySchema"]},{"start":{"row":305,"column":9},"end":{"row":305,"column":23},"action":"insert","lines":["relationSchema"]}]}],[{"group":"doc","deltas":[{"start":{"row":316,"column":9},"end":{"row":316,"column":18},"action":"remove","lines":["waySchema"]},{"start":{"row":316,"column":9},"end":{"row":316,"column":23},"action":"insert","lines":["relationSchema"]}]}],[{"group":"doc","deltas":[{"start":{"row":321,"column":34},"end":{"row":321,"column":35},"action":"remove","lines":["w"]}]}],[{"group":"doc","deltas":[{"start":{"row":321,"column":34},"end":{"row":321,"column":35},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":321,"column":35},"end":{"row":321,"column":36},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":321,"column":35},"end":{"row":321,"column":36},"action":"remove","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":299,"column":28},"end":{"row":299,"column":31},"action":"remove","lines":["tag"]},{"start":{"row":299,"column":28},"end":{"row":299,"column":29},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":299,"column":29},"end":{"row":299,"column":30},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":299,"column":30},"end":{"row":299,"column":31},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":299,"column":31},"end":{"row":299,"column":32},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":327,"column":4},"end":{"row":343,"column":7},"action":"insert","lines":["this.waySchema.findOne({_id: id}, function(err, w) {","        if (err) {","            return console.log(err);","        } else {","            var index;","            // find tag that matches","            for (var i = 0; i < w.tags_.length; i++) {","                if (w.tags_[i].value_ === tag.value_ && ","                    w.tags_[i].key_ === tag.key_ ) {","                    index = i;","                }","            }","            // remove","            w.tags_.splice(index);","            callback('removed tag', w);","        }","    });"]}]}],[{"group":"doc","deltas":[{"start":{"row":327,"column":9},"end":{"row":327,"column":18},"action":"remove","lines":["waySchema"]},{"start":{"row":327,"column":9},"end":{"row":327,"column":23},"action":"insert","lines":["relationSchema"]}]}],[{"group":"doc","deltas":[{"start":{"row":327,"column":57},"end":{"row":327,"column":58},"action":"remove","lines":["w"]}]}],[{"group":"doc","deltas":[{"start":{"row":327,"column":57},"end":{"row":327,"column":58},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":333,"column":32},"end":{"row":333,"column":33},"action":"remove","lines":["w"]},{"start":{"row":333,"column":32},"end":{"row":333,"column":33},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":334,"column":20},"end":{"row":334,"column":21},"action":"remove","lines":["w"]}]}],[{"group":"doc","deltas":[{"start":{"row":334,"column":20},"end":{"row":334,"column":21},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":334,"column":20},"end":{"row":334,"column":21},"action":"remove","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":334,"column":20},"end":{"row":334,"column":21},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":335,"column":20},"end":{"row":335,"column":21},"action":"remove","lines":["w"]}]}],[{"group":"doc","deltas":[{"start":{"row":335,"column":20},"end":{"row":335,"column":21},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":340,"column":12},"end":{"row":340,"column":13},"action":"remove","lines":["w"]}]}],[{"group":"doc","deltas":[{"start":{"row":340,"column":12},"end":{"row":340,"column":13},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":341,"column":36},"end":{"row":341,"column":37},"action":"remove","lines":["w"]}]}],[{"group":"doc","deltas":[{"start":{"row":341,"column":36},"end":{"row":341,"column":37},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":347,"column":4},"end":{"row":354,"column":7},"action":"insert","lines":["this.relationSchema.findOne({_id: relationId}, function(err, r) {","        if (err) {","            return console.log(err);","        } else {","            r.nodes_.push(nodeId);","            callback('added node', r);","        }","    });"]}]}],[{"group":"doc","deltas":[{"start":{"row":351,"column":26},"end":{"row":351,"column":32},"action":"remove","lines":["nodeId"]},{"start":{"row":351,"column":26},"end":{"row":351,"column":31},"action":"insert","lines":["wayId"]}]}],[{"group":"doc","deltas":[{"start":{"row":352,"column":28},"end":{"row":352,"column":32},"action":"remove","lines":["node"]},{"start":{"row":352,"column":28},"end":{"row":352,"column":29},"action":"insert","lines":["w"]}]}],[{"group":"doc","deltas":[{"start":{"row":352,"column":29},"end":{"row":352,"column":30},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":352,"column":30},"end":{"row":352,"column":31},"action":"insert","lines":["y"]}]}],[{"group":"doc","deltas":[{"start":{"row":358,"column":4},"end":{"row":365,"column":7},"action":"insert","lines":["this.relationSchema.findOne({_id: relationId}, function(err, r) {","        if (err) {","            return console.log(err);","        } else {","            r.nodes_.splice(r.nodes_.indexOf(nodeId));","            callback('removed node', r);","        }","    });"]}]}],[{"group":"doc","deltas":[{"start":{"row":362,"column":45},"end":{"row":362,"column":51},"action":"remove","lines":["nodeId"]},{"start":{"row":362,"column":45},"end":{"row":362,"column":46},"action":"insert","lines":["w"]}]}],[{"group":"doc","deltas":[{"start":{"row":362,"column":46},"end":{"row":362,"column":47},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":362,"column":47},"end":{"row":362,"column":48},"action":"insert","lines":["y"]}]}],[{"group":"doc","deltas":[{"start":{"row":362,"column":45},"end":{"row":362,"column":48},"action":"remove","lines":["way"]},{"start":{"row":362,"column":45},"end":{"row":362,"column":50},"action":"insert","lines":["wayId"]}]}],[{"group":"doc","deltas":[{"start":{"row":351,"column":14},"end":{"row":351,"column":20},"action":"remove","lines":["nodes_"]},{"start":{"row":351,"column":14},"end":{"row":351,"column":15},"action":"insert","lines":["w"]}]}],[{"group":"doc","deltas":[{"start":{"row":351,"column":15},"end":{"row":351,"column":16},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":351,"column":16},"end":{"row":351,"column":17},"action":"insert","lines":["y"]}]}],[{"group":"doc","deltas":[{"start":{"row":351,"column":17},"end":{"row":351,"column":18},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":351,"column":18},"end":{"row":351,"column":19},"action":"insert","lines":["_"]}]}],[{"group":"doc","deltas":[{"start":{"row":362,"column":30},"end":{"row":362,"column":36},"action":"remove","lines":["nodes_"]},{"start":{"row":362,"column":30},"end":{"row":362,"column":35},"action":"insert","lines":["ways_"]}]}],[{"group":"doc","deltas":[{"start":{"row":369,"column":4},"end":{"row":376,"column":7},"action":"insert","lines":["this.relationSchema.findOne({_id: relationId}, function(err, r) {","        if (err) {","            return console.log(err);","        } else {","            r.ways_.push(wayId);","            callback('added way', r);","        }","    });"]}]}],[{"group":"doc","deltas":[{"start":{"row":369,"column":38},"end":{"row":369,"column":48},"action":"remove","lines":["relationId"]},{"start":{"row":369,"column":38},"end":{"row":369,"column":48},"action":"insert","lines":["relationid"]}]}],[{"group":"doc","deltas":[{"start":{"row":368,"column":72},"end":{"row":368,"column":73},"action":"remove","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":368,"column":72},"end":{"row":368,"column":73},"action":"insert","lines":["I"]}]}],[{"group":"doc","deltas":[{"start":{"row":369,"column":38},"end":{"row":369,"column":48},"action":"remove","lines":["relationid"]},{"start":{"row":369,"column":38},"end":{"row":369,"column":48},"action":"insert","lines":["relationId"]}]}],[{"group":"doc","deltas":[{"start":{"row":373,"column":25},"end":{"row":373,"column":30},"action":"remove","lines":["wayId"]},{"start":{"row":373,"column":25},"end":{"row":373,"column":26},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":373,"column":26},"end":{"row":373,"column":27},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":373,"column":27},"end":{"row":373,"column":28},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":373,"column":28},"end":{"row":373,"column":29},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":373,"column":29},"end":{"row":373,"column":30},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":373,"column":25},"end":{"row":373,"column":30},"action":"remove","lines":["relat"]},{"start":{"row":373,"column":25},"end":{"row":373,"column":40},"action":"insert","lines":["relationToAddId"]}]}],[{"group":"doc","deltas":[{"start":{"row":374,"column":28},"end":{"row":374,"column":31},"action":"remove","lines":["way"]},{"start":{"row":374,"column":28},"end":{"row":374,"column":29},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":374,"column":29},"end":{"row":374,"column":30},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":374,"column":30},"end":{"row":374,"column":31},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":374,"column":31},"end":{"row":374,"column":32},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":374,"column":32},"end":{"row":374,"column":33},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":374,"column":33},"end":{"row":374,"column":34},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":374,"column":34},"end":{"row":374,"column":35},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":374,"column":35},"end":{"row":374,"column":36},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":363,"column":30},"end":{"row":363,"column":34},"action":"remove","lines":["node"]},{"start":{"row":363,"column":30},"end":{"row":363,"column":31},"action":"insert","lines":["w"]}]}],[{"group":"doc","deltas":[{"start":{"row":363,"column":31},"end":{"row":363,"column":32},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":363,"column":32},"end":{"row":363,"column":33},"action":"insert","lines":["y"]}]}],[{"group":"doc","deltas":[{"start":{"row":380,"column":4},"end":{"row":387,"column":7},"action":"insert","lines":["this.relationSchema.findOne({_id: relationId}, function(err, r) {","        if (err) {","            return console.log(err);","        } else {","            r.nodes_.splice(r.ways_.indexOf(wayId));","            callback('removed way', r);","        }","    });"]}]}],[{"group":"doc","deltas":[{"start":{"row":384,"column":44},"end":{"row":384,"column":49},"action":"remove","lines":["wayId"]},{"start":{"row":384,"column":44},"end":{"row":384,"column":54},"action":"insert","lines":["relationId"]}]}],[{"group":"doc","deltas":[{"start":{"row":373,"column":14},"end":{"row":373,"column":19},"action":"remove","lines":["ways_"]},{"start":{"row":373,"column":14},"end":{"row":373,"column":15},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":373,"column":15},"end":{"row":373,"column":16},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":373,"column":16},"end":{"row":373,"column":17},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":373,"column":17},"end":{"row":373,"column":18},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":373,"column":18},"end":{"row":373,"column":19},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":373,"column":19},"end":{"row":373,"column":20},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":373,"column":20},"end":{"row":373,"column":21},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":373,"column":21},"end":{"row":373,"column":22},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":373,"column":22},"end":{"row":373,"column":23},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":373,"column":23},"end":{"row":373,"column":24},"action":"insert","lines":["_"]}]}],[{"group":"doc","deltas":[{"start":{"row":362,"column":14},"end":{"row":362,"column":20},"action":"remove","lines":["nodes_"]},{"start":{"row":362,"column":14},"end":{"row":362,"column":15},"action":"insert","lines":["w"]}]}],[{"group":"doc","deltas":[{"start":{"row":362,"column":15},"end":{"row":362,"column":16},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":362,"column":16},"end":{"row":362,"column":17},"action":"insert","lines":["y"]}]}],[{"group":"doc","deltas":[{"start":{"row":362,"column":17},"end":{"row":362,"column":18},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":362,"column":18},"end":{"row":362,"column":19},"action":"insert","lines":["_"]}]}],[{"group":"doc","deltas":[{"start":{"row":384,"column":14},"end":{"row":384,"column":20},"action":"remove","lines":["nodes_"]},{"start":{"row":384,"column":14},"end":{"row":384,"column":24},"action":"insert","lines":["relations_"]}]}],[{"group":"doc","deltas":[{"start":{"row":385,"column":30},"end":{"row":385,"column":33},"action":"remove","lines":["way"]},{"start":{"row":385,"column":30},"end":{"row":385,"column":31},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":385,"column":31},"end":{"row":385,"column":32},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":385,"column":32},"end":{"row":385,"column":33},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":385,"column":33},"end":{"row":385,"column":34},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":385,"column":34},"end":{"row":385,"column":35},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":385,"column":35},"end":{"row":385,"column":36},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":385,"column":36},"end":{"row":385,"column":37},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":385,"column":37},"end":{"row":385,"column":38},"action":"insert","lines":["n"]}]}]]},"ace":{"folds":[],"customSyntax":"javascript","scrolltop":5038,"scrollleft":0,"selection":{"start":{"row":384,"column":49},"end":{"row":384,"column":49},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":358,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1425939077874,"hash":"cc7bc291337edcf33d49c6239ecd976ffd564244"}